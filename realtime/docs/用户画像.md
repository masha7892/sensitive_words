# 用户画像
>基础特征包括年龄、性别、年代、身高、体重、星座6类标签
## 1.用户年龄标签
- 根据用户在淘宝平台上
  - 浏览
  - 搜索
  - 收藏
  - 加购
  - 购买
- 年龄段分为6类：
   - 18-24岁 
   - 25-29 岁
   - 30-34 岁
   - 35-39岁
   - 40-49岁
   - 50岁以上。
> 1.1 存在有效年龄
 ```
读取业务数据kafka,直接对birthday进行计算获取年龄,存入doris中
```


> 1.2 不存在有效年龄
 ```
-- 1.2.1 类目偏好、品牌偏好、价格敏感度
  读取业务数据kafka,使用user_id关联order_info,favor_info,cart_info获取品类及品牌名,以及商品金额,存入doris中

-- 1.2.2 时间行为
  读取日志数据kafka获取页面日志数据,获取用户行为时间,存入doris中
  读取业务数据kafka,获取order_info,favor_info,cart_info,order_refund_info,user_info的操作时间,存入doris中

-- 1.2.3 搜索词分析
  读取日志数据kafka获取搜索日志数据,获取搜索词,存入doris中

-- 1.2.4 设备信息
  读取日志数据kafka获取common中的md,os,vc字段,存入doris中

-- 1.2.5 社交互动行为
  暂时找不到社交互动行为
```

## 2.用户性别标签
- 浏览、收藏、加购、购买等行为 ,结合购买商品的一级品类分布及行为频次
- 标签分为三类 
  - 女性用户
  - 男性用户
  - 家庭用户
- 排除干扰行为：若用户存在刷单行为（如短时间内高频浏览/加购非目标品类），需通过异常行为检测模块过滤后，再进行标签计算。
```
读取之前分析年龄时存入doris的order_info,favor_info,cart_info数据有一级品类分布,使用物化视图进行聚合计算频次

```
## 3.用户体重
> 3.1 存在有效体重
 ```
数据库中没有体重数据，需要通过其他方式获取
```
> 3.2 不存在有效年龄
 ```
根据上述统计出的用户年龄和用户性别，结合权威统计数据,进行用户体重的估算
读取从kafka过滤到spu_sale_attr,spu_sale_attr_value,获取相关商品spu的属性值,如衣服鞋类的尺寸，进行计算
```
> 3.3 数据清洗与转换
```
-- 3.3.1 若含“斤”单位，数值除以2（如“120斤”→60kg）；
-- 3.3.2 若含“克”“g”，数值除以1000（如“65000g”→65kg）；
-- 3.3.3 无单位默认“千克”。
-- 3.3.4 异常值过滤：
-- 3.3.5 剔除<30kg（低于儿童最低合理值）或>200kg（成人极端值）的记录；
-- 3.3.6 排除非数值字符（如“50公斤左右”标记为无效）。
```
## 4.用户身高
> 4.1 存在有效身高
 ```
数据库中没有身高数据，需要通过其他方式获取
```
> 4.2 不存在有效身高
 ```
根据上述统计出的用户年龄和用户性别，结合权威统计数据,进行用户身高的估算
读取从kafka过滤到spu_sale_attr,spu_sale_attr_value,获取相关商品spu的属性值,如衣服鞋类的尺寸，进行计算
```
> 4.3 数据清洗
```
-- 4.3.1 过滤<100cm或>250cm的异常值
-- 4.3.2 排除「666」「888」等特殊数字
-- 4.3.3 过滤非整数数值
```
## 5.星座标签
- 解析星座，用于分析用户的性格特征、消费偏好等画像属性。
- 输出标签属性值：
  - 白羊座
  - 金牛座
  - 双子座
  - 巨蟹座
  - 狮子座
  - 处女座
  - 天秤座
  - 天蝎座
  - 射手座
  - 摩羯座
  - 水瓶座
  - 双鱼座
  - 未知

> 5.1 存在有效星座
```
从kafka的user_info中获取birthday字段,进行拆分计算
```
> 5.2 不存在有效星座
```
填写为未知
```